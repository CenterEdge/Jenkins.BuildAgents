{
  "variables": {
    "source_ami": "ami-5b820a24",
    "aws_access_key": "",
    "aws_secret_key": "",
    "aws_session_token": "",
    "aws_region": "us-east-1",
    "aws_security_group": "",
    "aws_instance_type": "m3.large",
    "aws_associate_public_ip_address": "true",
    "aws_ena_support": "false",
    "aws_userdata_file": "",
    "repository": "",
    "package_type": ""
  },
  "builders": [
    {
        "access_key": "{{user `aws_access_key`}}",
        "secret_key": "{{user `aws_secret_key`}}",
        "token": "{{user `aws_session_token`}}",
        "ami_name": "jenkins-linux-git-docker-{{timestamp}}",
        "instance_type": "{{user `aws_instance_type`}}",
        "region": "{{user `aws_region`}}",
        "associate_public_ip_address": "{{user `aws_associate_public_ip_address`}}",
        "security_group_id": "{{user `aws_security_group`}}",
        "source_ami": "{{user `source_ami`}}",
        "ssh_username": "ec2-user",
        "type": "amazon-ebs",
        "ena_support": "{{user `aws_ena_support`}}",
        "ami_users": [
            "097130181434"
        ],
        "snapshot_users": [
            "097130181434"
        ],
        "launch_block_device_mappings": [
          {
            "device_name": "/dev/xvda",
            "volume_size": 50,
            "volume_type": "gp2",
            "delete_on_termination": true
          }
        ],
        "run_tags": {
          "Name": "Packer jenkins-linux-git-docker"
        }
    }
  ],
  "provisioners": [
    {
        "type": "shell",
        "script": "amis/aws-linux-hvm/scripts/git-docker.sh"
    }
  ]
}
